---
title: "Lombok @Singular Annotation"
title_style: title2w
canonical_url: https://www.kapresoft.com/java/2023/05/01/lombok-singular-annotation.html
category: java
related: lombok
description: "Usecase benefits of the @Singular annotation in Java, and how it simplifies working with collections list map set"
---

## Overview

Lombok is a Java library that provides a set of annotations and utility classes to reduce boilerplate code in Java projects. One of its popular annotations is _@Singular_, which generates builder methods for collections.<!--excerpt-->

<a id='oNiF1ivCTvdu2X6pkjQUqQ' class='gie-single' href='http://www.gettyimages.com/detail/1403222153' target='_blank' style='color:#a7a7a7;text-decoration:none;font-weight:normal !important;border:none;display:inline-block;'>Embed from Getty Images</a><script>window.gie=window.gie||function(c){(gie.q=gie.q||[]).push(c)};gie(function(){gie.widgets.load({id:'oNiF1ivCTvdu2X6pkjQUqQ',sig:'mD0FL9FneNSugmUbjyZQl9HFoMkatqse4rbwDf1TNsM=',w:'550px',h:'200',items:'1403222153',caption: false ,tld:'com',is360: false })});</script><script src='//embed-cdn.gettyimages.com/widgets.js' charset='utf-8' async></script>

## What is @Singular?

When you annotate a collection field or parameter with _@Singular_, Lombok generates two methods for that collection: a method to add a single element to the collection, and a method to add multiple elements to the collection. These methods have names based on the singular and plural forms of the collection field or parameter. For example, if you annotate a field named items with _@Singular_, Lombok will generate an item method to add a single item and an items method to add multiple items.

For the reader's convenience, the [Singular.java](#source-code) can be found in the [Source Code](#source-code) section of this article.

Here's an Example in Java:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.List;

@Builder
public class Order {
    private final String orderId;
    @Singular private final List<String> items;
}
```

In this example, the Order class has a field named items that is annotated with _@Singular_. When you use the @Builder annotation to build an instance of Order, Lombok generates a builder() method that you can use to add items to the items field. Here's an example of how to use the builder:

```java
Order order = Order.builder()
        .orderId("123")
        .item("item1")
        .item("item2")
        .items(List.of("item3", "item4"))
        .build();
```

## @Singular Options

The _@Singular_ annotation from Lombok has a few other options that can be used to customize the behavior of the generated methods:

### value

This option allows you to specify a custom name for the singular method that adds a single element to the collection. By default, Lombok generates this method based on the name of the annotated field.

Example:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.List;

@Builder
public class Order {
    private final String orderId;
    @Singular("addItem") private final List<String> items;
}
```

With this option, the singular method for adding an item to the items list will be named addItem() instead of item().

### ignoreNullCollections

This option allows you to specify whether or not to generate methods for adding elements to the collection if the collection is null. If this option is set to true, Lombok will skip generating the methods if the collection is null.

Example:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.List;

@Builder
public class Order {
    private final String orderId;
    @Singular(ignoreNullCollections = true) private final List<String> items;
}
```

With this option set to true, Lombok will not generate the singular and plural methods for the items list if it is null.

### ignoreEmptyCollections

This option allows you to specify whether or not to generate methods for adding elements to the collection if the collection is empty. If this option is set to true, Lombok will skip generating the methods if the collection is empty.

```java
import lombok.Builder;
import lombok.Singular;

import java.util.List;

@Builder
public class Order {
    private final String orderId;
    @Singular(ignoreEmptyCollections = true) private final List<String> items;
}
```

With this option set to true, Lombok will not generate the singular and plural methods for the items list if it is empty.

### suppressWarnings

This option allows you to suppress any warnings that may be generated by the _@Singular_ annotation.

```java
import lombok.Builder;
import lombok.Singular;

import java.util.List;

@Builder
@SuppressWarnings("lombok:Singular") // suppress any warnings that may be generated
public class Order {
    private final String orderId;
    @Singular private final List<String> items;
}
```
With this option set, any warnings generated by the _@Singular_ annotation will be suppressed.

These options can be used individually or in combination to customize the behavior of the _@Singular_ annotation in Lombok.

## What else is important about @Singular?

There are a few more things you may need to know about the _@Singular_ annotation from Lombok:

### Defensive Copies

_@Singular_ generates defensive copies of collections by default. This means that the methods generated by _@Singular_ will create a new copy of the collection before adding or removing elements, which helps prevent unwanted modifications to the original collection.

### Collections 

The _@Singular_ annotation works with several types of collections, including List, Set, and Map.

### Map Fields

When using _@Singular_ with Map fields, you can specify the names of the singular and plural methods for adding and removing entries by using the key and entry options. 

For example:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.Map;

@Builder
public class Order {
    private final String orderId;
    @Singular private final Map<String, Integer> items;
}
```

In this example, the items field is a Map of strings to integers, and _@Singular_ will generate methods for adding and removing entries from the map using the default names item() and items(). 

If you want to use custom names, you can use the key and entry options to specify them:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.Map;

@Builder
public class Order {
    private final String orderId;
    @Singular(key = "itemName", entry = "quantity") private final Map<String, Integer> items;
}
```

In this example, the _@Singular_ annotation is configured to use the names itemName() and quantities() for adding and removing entries from the map, respectively.

### Custom Collection Types

_@Singular_ can be used with custom collection types that have a single-argument add method. If you have a custom collection type with a different method for adding elements, you can use the method option to specify its name:

```java
import lombok.Builder;
import lombok.Singular;

import java.util.Deque;

@Builder
public class Order {
    private final String orderId;
    @Singular(method = "push") private final Deque<String> items;
}
```

In this example, the _@Singular_ annotation is configured to use the push() method of a Deque to add elements to the collection.

These are some additional details about the _@Singular_ annotation that you may find useful when working with Lombok.

## In Conclusion

In conclusion, the _@Singular_ annotation from Lombok is a handy tool that simplifies the process of creating and modifying collections in your Java code. By using this annotation, you can generate concise and easy-to-use methods for adding and removing elements from collections, such as lists, sets, maps, and custom collection types. Additionally, the _@Singular_ annotation has various options that allow you to customize the names and behavior of the generated methods to suit your needs. Whether you're a beginner or an experienced programmer, _@Singular_ can save you time and effort when working with collections.

## Source Code

Here is a snapshot of the Singular.java annotation source code:

<script src="https://gist.github.com/kapresoft/f124b2cf0acbc29dba4d22cac32b6511.js"></script>
